{% extends "base.html" %}
{% import "macro.html" as macros %}
{% block head %}
    <script src="https://maps.googleapis.com/maps/api/js"></script>
{% endblock %}
{% block menu %}
    <li class="menu" onclick="location.href='/modifier/{{ aireDeJeux.indice|e }}'" style="cursor: pointer">Modifier</li>
{% endblock %}
{% block content %}
<div id="title" class="highlight">
    <div id="ville">{{ ville.nom|e }}</div>
    <div id="name">{{ aireDeJeux.nom|e }}</div>
</div>
<div id="content">
    <div id="stars">
        {% for i in range(5) %}
        <svg width="22" height="22" class="stars">
            {% if aireDeJeux.score and aireDeJeux.score > i %}
                <circle cx="11" cy="11" r="10" stroke="green" stroke-width="1" fill="yellow" />{{i}}
            {% else %}
                <circle cx="11" cy="11" r="10" stroke="green" stroke-width="1" fill="grey" />{{i}}
            {% endif %}
        </svg>
        {% endfor %}
    </div>
    <div class="contenant">
        <div class="contenue">
            <div id="box-activitees">
                <div id="title-activitee" class="bigger highlight">Activités:</div>
                <div id="list-activitees">
                    {% for activite in aireDeJeux.activites %}
                        <div class="activitee">{{ activite|e }}</div>
                    {% endfor %}
                </div>
            </div>
            <div id="box-acces">
                <div id="title-accesibilite" class="bigger highlight">Accessibilité</div>
                <div id="description-accesibilte">{{ aireDeJeux.accesibilite|e }}</div>
            </div>
            <div id="horraire" class="bigger horizontal">
                <div class="inside">Horaire:</div><div class="inside">{{ aireDeJeux.horaires|e }}</div>
            </div>
            <div id="age" class="bigger horizontal">
                <div class="inside">Age:</div><div class="inside">{{ aireDeJeux.age|e }}</div>
            </div>
            <div id="description">
            <div class="bigger highlight">
                Description:
            </div>
            <p class="description">
                {{ aireDeJeux.description|e }}
            </p>
            </div>
            <div id="comentaires">
                <div class="bigger highlight commentaire-title horizontal">
                    <div>Commentaire(s): </div><div class="center"> </div><div class="plus" onclick="new_commentaire()"> + </div>
                </div>
                {% if listCommentaires %}
                    {% for commentaire in listCommentaires %}
                    <p class="commentaire">
                        {{ commentaire.commentaire|e }}
                    </p>
                    {% endfor %}
                {% endif %}

            </div>
        </div>
        <div class="contenue">
            <div class="ratio23outside">
            <div class="ratio23inside">
            <div id="map"></div></div></div>
            {{ macros.photos(listImage, aireDeJeux.indice) }}
        </div>
    </div>
</div>
<script>

    function initialize(lat, lon) {
        var mapCanvas = document.getElementById("map");
        var myLatLng = {lat: lat, lng: lon};
        var styles =  [ { "stylers": [ { "saturation": 5 }, { "lightness": -5 },
        { "gamma": 1.16 }, { "hue": "#004cff" } ] } ];
        var styledMap = new google.maps.StyledMapType(styles,
    {name: "Styled Map"});

        var mapOption = {
            center: myLatLng,
            zoom: 15,
            mapTypeIds:[google.maps.MapTypeId.ROADMAP, 'map_style']
        }
        var map = new google.maps.Map(mapCanvas, mapOption);
        map.mapTypes.set('map_style', styledMap);
        map.setMapTypeId('map_style');
        var marker = new google.maps.Marker({
            position: myLatLng,
            map: map,
        });
    }
    initialize({{ aireDeJeux.coordonnees.lat if aireDeJeux.coordonnees.lat else ville.coordonnees.lat}},
        {{ aireDeJeux.coordonnees.lon if aireDeJeux.coordonnees.lon else ville.coordonnees.lon}});

</script>
{% endblock %}